let addButton=document.querySelector(".input__button"),search=document.querySelector(".header__search-input"),tabList=document.querySelector(".tab"),input=document.querySelector(".input__textarea"),toDo=document.querySelector(".toDo__list"),toDoList=[],tab="All";function inputOnOff(){let t=document.querySelector(".input");"Done"===tab?t.classList.add("input-off"):t.classList.remove("input-off")}function setTabClass(){document.querySelectorAll(".tab__links").forEach((function(t){t.innerHTML===tab&&t.classList.toggle("tab__links--active")}))}function displayItems(){let t="",e=[];"All"===tab?e=toDoList.slice():"Active"===tab?e=toDoList.filter((t=>!1===t.done)):"Done"===tab&&(e=toDoList.filter((t=>!0===t.done))),""!==search.value&&(e=e.filter((t=>!0===t.text.toLowerCase().includes(search.value.toLowerCase())))),0===e.length&&(toDo.innerHTML=""),e.forEach((function(e){t+=`\n\t\t<li class="toDo__list-item list-item ${e.done?"list-item--done":""} ${e.important?"list-item--important":""}" tabindex=0>\n\t\t\t<span class="list-item__text" title='${e.text}'>${e.text.replace(/\n/g,"<br/>")}</span>\n\t\t\t<button class="list-item__mark mark">${e.important?"NOT IMPORTANT":"MARK IMPORTANT"}</button>\n\t\t\t<button class="list-item__del"></button>\n\t\t</li>`,toDo.innerHTML=t}))}null===JSON.parse(localStorage.getItem("tab"))?localStorage.setItem("tab",JSON.stringify(tab)):tab=JSON.parse(localStorage.getItem("tab")),setTabClass(),inputOnOff(),tabList.addEventListener("click",(function(t){t.target.closest(".tab__links")&&(setTabClass(),t.target.classList.toggle("tab__links--active"),tab=t.target.innerHTML,localStorage.setItem("tab",JSON.stringify(tab)),displayItems(),inputOnOff())})),localStorage.getItem("toDoList")&&(toDoList=JSON.parse(localStorage.getItem("toDoList")),displayItems()),addButton.addEventListener("click",(function(){if(""===input.value)alert("You must write something!");else{let t={text:input.value,done:!1,important:!1};toDoList.push(t),displayItems(),input.value="",localStorage.setItem("toDoList",JSON.stringify(toDoList))}}));let searchWrap=document.querySelector(".header__search-wrapper");searchWrap.addEventListener("click",(function(t){t.target.closest(".header__search-wrapper")&&displayItems()})),search.addEventListener("input",displayItems);let list=document.querySelector(".toDo__list");list.addEventListener("click",(function(t){if("LI"===t.target.tagName||t.target.closest(".list-item__text")){let e;t.target.closest(".list-item__text")?(t.target.parentElement.classList.toggle("list-item--done"),e=t.target.innerHTML.replace(/<br>/g,"\n")):(t.target.classList.toggle("list-item--done"),e=t.target.children[0].innerHTML.replace(/<br>/g,"\n")),toDoList.forEach((function(t){t.text===e&&(t.done=!t.done,localStorage.setItem("toDoList",JSON.stringify(toDoList)))}))}let e=t.target.closest(".list-item__del");if(e){let t=e.parentElement.children[0].innerHTML.replace(/<br>/g,"\n");toDoList.forEach((function(e,i){e.text===t&&(toDoList.splice(i,1),displayItems(),localStorage.setItem("toDoList",JSON.stringify(toDoList)))}))}let i=t.target.closest(".list-item__mark");if(t.target.closest(".list-item__mark")){i.parentElement.classList.toggle("list-item--important"),i.innerHTML="MARK IMPORTANT"===i.innerHTML?"NOT IMPORTANT":"MARK IMPORTANT";let t=i.parentElement.children[0].innerHTML.replace(/<br>/g,"\n");toDoList.forEach((function(e){e.text===t&&(e.important=!e.important,localStorage.setItem("toDoList",JSON.stringify(toDoList)))}))}}));